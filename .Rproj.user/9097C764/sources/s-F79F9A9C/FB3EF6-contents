---
title: "Instant Gas Exchange Analysis (IGEA) package"
output:
  # pdf_document:
  #   toc: yes
  html_document:
    toc: yes
    toc_float: yes
---

## Introduction

Photosythesis rate, water conductance and Ci/Ca (intercellular to ambient CO2 partial pressures) are three key plant physiological parameters in terms of carbon simulation and water use efficiency ( [Lawson and Blatt, 2014](http://www.plantphysiol.org/content/plantphysiol/164/4/1556.full.pdf); [Ellsworth and Cousins, 2016](http://www.sciencedirect.com/science/article/pii/S1369526616300632?via%3Dihub) ). In short, I will refer these three parameters as "gas exchange parameters"" in the following context. They can be measured simultaneously using LI-6400XT Portable Photosynthesis System [(LiCor Inc. Lincoln Nebraska, USA)](https://www.licor.com/env/products/photosynthesis/LI-6400XT/). The actual measurement procedure is relatively complex, but the short story is that you place the machine right next to the plant, clamp the leaf into the chamber, and initiate the autolog program. LI-6400XT records all the input parameters in time series and does the calculation to get those parameters that we care about.

This R package is designed specifically for experimental projects that are currently going on in [Leakey Lab (UIUC)](https://lab.igb.illinois.edu/leakey/home). Recently Postoc Dr. Wertin applied a high-throughtput protocol for gas exchange measurements in this summer field season. The major improvement of this protocol involves harvesting leaves in the field and then conducting measurements in lab instead of taking the machine out in the field to the plants. This newer method allows us to measure more than 200 leafs (single 4-minute measurement on each leaf) per day, attributing to the fact that people don't need to carry around the heavy machine in the field under harsh sunlight. After being harvested from field and take back to lab, each leaf is kept hydrated by inserting its cut wound side into a 10 ml tube full of water. Leaves are rotationally incubated for half an hour in two lighted growth chambers prior to measurements since it takes that long to activate each leaf and let them function happily. Recording leaf's identity into LI-6400XT is done by adding "remarks" of leaf identity between two measurements. This is a bit old fashioned and also is where a big part of human errors come from that need to be fixed. Measurements are taken place after clamping the leaf for 4 minutes. 

```{r include = FALSE}
GXread = "read.GX"
CS_GXcurve = "CS.GXcurve"
plotGX = "plotGX"
Find_GXcurve = "Find.GXcurve"
GetValue_GXcurve = "GetValue,GXcurve"
PGMean = "PGMean.GXvalue"
summary_GXcurve = "summary.GXcurve"
summary_GXvalue = "summary.GXvalue"
summary_GXmean = "summary.GXmean"

```


The aim of this package is to provide a pipeline of treating the standard output table from LI-6400XT. Measurements are first reformated, merged and screened to see abnormal measurements in ``GXread`` and ``CS_GXcurve`` function. Then curves can be plotted so that outliers can be spotted and found, using ``plotGX`` and ``Find_GXcurve``. Values will be extracted from curves with function ``GetValue_GXcurve``. At last ``PGMean`` is unsed to calculate plot means and genotype means. ``summary_GXcurve``, ``summary_GXvalue``, ``summary_GXmean`` provide detailed information for corresponding class of data.

There are two types of value we calculate and include in our further experiment (like correlation with other traits): First, we find the biggest "water conductance" value in the first minute and take the corresponding "Photosythesis" and "Ci/Ca" values; Second, we take the means of these three parameters in the last minute. Currently we don't know which set of values are better representative but we hope further analysis will tell us more. After

## read.GX



## example
```{r include = FALSE}
library(viridis)
```

The code below demonstrates two color palettes in the [viridis](https://github.com/sjmgarnier/viridis) package. Each plot displays a contour map of the Maunga Whau volcano in Auckland, New Zealand.

## Viridis colors

```{r}
image(volcano, col = viridis(200))
```

## Magma colors

```{r}
image(volcano, col = viridis(200, option = "A"))
```
